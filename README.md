# Систем за наводњавање

Паметни систем за наводњавање базиран на ESP8266 микроконтролеру и React веб апликацији.

## Садржај

1. [Компоненте система](#компоненте-система)
2. [Хардверско подешавање](#хардверско-подешавање)
3. [Софтверско подешавање](#софтверско-подешавање)
4. [Повезивање система](#повезивање-система)
5. [Коришћење апликације](#коришћење-апликације)

## Компоненте система

### Хардвер
- ESP8266 NodeMCU
- Релеј модул (број канала зависи од броја зона)
- Сензори влажности земљишта
- 12V соленоидни вентили
- 12V напајање
- Каблови за повезивање

### Софтвер
- Arduino IDE
- React веб апликација
- ESP8266 WiFi библиотека
- ArduinoJSON библиотека

## Хардверско подешавање

### Повезивање компоненти

1. **Напајање**
   - Повежите 12V напајање на релеј модул
   - Повежите 5V са NodeMCU на релеј модул за контролну логику

2. **Релеј модул**
   - Повежите контролне пинове релеја на GPIO пинове ESP8266
   - Препоручени пинови: D1, D2, D3, D4 (GPIO 5, 4, 0, 2)

3. **Сензори влажности**
   - Повежите аналогне излазе сензора на A0 pin
   - Користите мултиплексер ако имате више сензора
   - VCC -> 3.3V
   - GND -> GND

4. **Соленоидни вентили**
   - Повежите вентиле на NO (Normally Open) контакте релеја
   - Повежите други крај вентила на 12V напајање

### Дијаграм повезивања

```
ESP8266 NodeMCU     Релеј модул          Сензор влажности
+------------+     +------------+        +------------+
| 3.3V    -->|     |VCC         |        |VCC         |
| GND     -->|     |GND         |        |GND         |
| D1      -->|     |IN1         |        |            |
| D2      -->|     |IN2         |        |            |
| D3      -->|     |IN3         |        |            |
| D4      -->|     |IN4         |        |            |
| A0      -->|     |            |        |AO          |
+------------+     +------------+        +------------+
```

### Повезивање електро вентила

```
12V Напајање      Релеј модул          Вентил
+------------+     +------------+     +------------+
| +12V    -->|     |COM         |     |+          |
| GND     -->|     |NO       -->|     |-          |
+------------+     |NC          |     +------------+
                   +------------+
```

## Софтверско подешавање

### 1. Инсталација Arduino IDE

1. Преузмите Arduino IDE са [званичног сајта](https://www.arduino.cc/en/software)
2. Инсталирајте Arduino IDE пратећи упутства за ваш оперативни систем
3. Покрените Arduino IDE

### 2. Подешавање за ESP8266

1. Отворите Arduino IDE
2. Идите на File -> Preferences
3. У поље "Additional Boards Manager URLs" додајте:
   ```
   http://arduino.esp8266.com/stable/package_esp8266com_index.json
   ```
4. Идите на Tools -> Board -> Boards Manager
5. Претражите "ESP8266"
6. Инсталирајте "ESP8266 by ESP8266 Community"

### 3. Инсталација потребних библиотека

1. Идите на Tools -> Manage Libraries
2. Инсталирајте следеће библиотеке:
   - ESP8266WiFi
   - ESP8266WebServer
   - ArduinoJson
   - ESP8266mDNS

### 4. Подешавање плоче

1. Изаберите плочу: Tools -> Board -> ESP8266 Boards -> NodeMCU 1.0
2. Подесите параметре:
   - Upload Speed: 115200
   - CPU Frequency: 80 MHz
   - Flash Size: 4MB (FS:2MB OTA:~1019KB)
   - Port: COM* (Windows) или /dev/ttyUSB* (Linux)

### 5. Upload кода

1. Преузмите код са репозиторијума
2. Отворите `.ino` фајл у Arduino IDE
3. Измените WiFi креденцијале у коду:
   ```cpp
   const char* ssid = "ВАШ_SSID";
   const char* password = "ВАША_ЛОЗИНКА";
   ```
4. Повежите ESP8266 преко USB кабла
5. Притисните дугме "Upload" у Arduino IDE
6. Сачекајте да се заврши upload

## Повезивање система

1. Укључите напајање система
2. Повежите се на "IrrigationSystem" WiFi мрежу
3. Отворите веб апликацију
4. Пратите упутства за повезивање у апликацији

## Коришћење апликације

1. **Зоне заливања**
   - Додајте нове зоне
   - Подесите распоред заливања
   - Пратите влажност земљишта

2. **Распоред**
   - Подесите време заливања
   - Изаберите дане у недељи
   - Подесите трајање заливања

3. **Историја**
   - Прегледајте историју заливања
   - Пратите потрошњу воде
   - Анализирајте ефикасност система

## Решавање проблема

### Чести проблеми

1. **ESP8266 се не повезује**
   - Проверите WiFi креденцијале
   - Рестартујте уређај
   - Проверите јачину сигнала

2. **Сензори не раде**
   - Проверите повезаност
   - Калибришите сензоре
   - Проверите напајање

3. **Вентили не раде**
   - Проверите повезаност релеја
   - Проверите напајање вентила
   - Проверите контролне сигнале